<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
  </head>
  <body>
    <div id="root" data-defaultTimeStart="2024-01-01" data-defaultTimeEnd="2025-01-01"></div>

    <div id="editMode">Edit </div>
    
    <script type="module" src="/src/main.jsx"></script>
    
    <script>
      const root = document.querySelector('#root')

        root.dataset.groups = JSON.stringify([
          { id: "0", title: "キックオフ", type: 1 },
          { id: "1", title: "Marguerite" },
          { id: "2", title: "受け入れ 試験" },
          { id: "3", title: "納品", type: 2 },
        ]);
        root.dataset.items = JSON.stringify([
          {
            id: "0",
            group: "1",
            start: 1706310000000,
            end: 1720575339222,
          },
          {
            id: "-1",
            group: "0",
            title: "masker",
            type: 1,
            start: 1706310000000,
            end: 1706310000000,
          },
          {
            id: "-2",
            group: "3",
            title: "masker",
            type: 2,
            start: 1720575339222,
            end: 1720575339222,
          },
        ]);

        root.addEventListener("modify:groups", (e) => {
          root.dataset.groups = JSON.stringify(e.detail);

          const event = new CustomEvent("sync:groups");

          root.dispatchEvent(event);
        });

        root.addEventListener("modify:groups", (e) => {
          console.log("modify:groups", e.detail);
        });

        root.addEventListener("modify:items", (e) => {
          console.log("modify:items", e.detail);
        });

        root.addEventListener("create:item", (e) => {
          console.log("create:item", e.detail);
        });

        root.addEventListener("create:group", () => {
          console.log("create:group")
        })

        root.addEventListener("select:item", (e) => {
          console.log(`select:items`, e.detail);
        });
      
      document.addEventListener("DOMContentLoaded", () => {
        window.renderCalendar("root");
      });
    </script>
  </body>
</html>
